forked from [urfu-2017/autotests-task-02](https://github.com/urfu-2017/autotests-task-02)

# «Твиттер» [![Build Status](https://travis-ci.org/urfu-2017/autotests-task-02.svg?branch=master)](https://travis-ci.org/urfu-2017/autotests-task-02)

На днях Илье пришли его новенькие наручные часы. Те самые,
с небольшим дисплеем, двумя кнопками и bluetooth. Обманывать шагомер
и читать СМСки Илья научился в тот же вечер. Его новая цель —
выводить на экран часов твиты на заданную тему. Чтобы подружить
твиттер и часы, достаточно сходить за списком твитов и преобразовать
их в строку. Всё остальное - дело техники!

Список твитов получаем вызовом функции `getTweets` из файла
`lib/getTweets.js`. Тема твитов определяется хэштегом,
который передаётся в функцию первым аргументом. В ответе вернется массив,
из каждого твита возьмём только дату публикации `created_at` и текст `text`.

Например, такой набор твитов получим по запросу `'#urfu-testing-2017'`:
```json
[
  {
    "created_at": "2018-04-11T15:09:10.609Z",
    "text": "Библиотека #nock позволяет не только удобно писать тесты, но и вести разработку фронтеда, в то время, когда бекенд ещё только проектируется! #urfu-testing-2017"
  },
  {
    "created_at": "2016-12-25T12:00:10.123Z",
    "text": "Для подмены модулей раньше я использовал #mockery, а сейчас всей душой полюбил #proxyquire. #urfu-testing-2017"
  }
]
```

Текст твита выводится на экран как есть,
а вот дату Илья хочет видеть в следующем виде:
  1. Если сообщение написано сегодня, то выводим только время: `"2018-04-11T15:09:10.609Z" -> "15:09"`
  2. Вчерашние сообщения выводятся так: `"2018-04-10T15:09:10.609Z" -> "вчера в 15:09"`
  3. Более старые твиты дополняются датой: `"2018-03-25T15:09:10.609Z" -> "25 марта в 15:09"`
  4. Если сообщение написано в плошлом году, то это нужно обязательно упомянуть: `"2017-03-25T16:09:10.609Z" -> "25 марта 2017 года в 15:09"`

Форматирование даты нужно реализовать в файле `lib/formatDate.js`.
Логику получения и вывода твитов пишем в файле `lib/index.js`.
Если всё получилось правильно, на консоли увидим:

```
вчера в 15:09
Библиотека #nock позволяет не только удобно писать тесты, но и вести разработку фронтеда, в то время, когда бекенд ещё только проектируется! #urfu-testing-2017

25 декабря 2016 года в 12:00
Для подмены модулей раньше я использовал #mockery, а сейчас всей душой полюбил #proxyquire. #urfu-testing-2017
```

Покрой код тестами, чтобы убедиться что он работает не только
на тестовых примерах. Проверь все хитрые случаи форматирования даты
в тестах на функцию `formatDate`. Тесты на `showTweets` изолируй от
`formatDate` любым из предложенных в лекции способом.

### Бонусное задание
Для тех смельчаков, кому работа с датами и подмена модулей в тесте
показались легкими, Илья придумал усложнение. Сделать из твитов
бегущую строку. Для этого нужно выводить на консоль по одному символу
раз в 100ms.

### Почитать
  * [Слайды лекции про мок-объекты](https://urfu-2017.github.io/testing-slides/07-mock/#/)
  * [Как подменить настоящий модуль тестовым](https://www.npmjs.com/package/proxyquire)
  * [Как написать заглушку проще](http://sinonjs.org/)
  * [Как делать операции раз в 100ms](https://learn.javascript.ru/settimeout-setinterval)
  * [Как отправить пуллреквест](https://urfu-2016.github.io/javascript-slides/01-intro/#/37)

![bands](https://cloud.githubusercontent.com/assets/1654243/25427135/14363a82-2a8b-11e7-85a3-b8b5e0c97b3a.jpg)
